%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass{entcs}
\usepackage{entcsmacro}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stmaryrd}

\usepackage[activate={true,nocompatibility},
            final,
            tracking=true,
            kerning=true,
            spacing=true,
            factor=1100,
            stretch=10,
            shrink=10]{microtype}
\microtypecontext{spacing=nonfrench}
\SetTracking{encoding={*},
             shape=sc}{10}
\emergencystretch=10pt

\usepackage{prftree}
\prfinterspace=1.5em
% \prflinepadbefore=1pt
% \prflinepadafter=3pt

\usepackage{environ}
\NewEnviron{proofalign*}{%
  \setlength{\abovedisplayskip}{0pt}%
  \setlength{\belowdisplayskip}{0pt}%
  \setlength{\abovedisplayshortskip}{0pt}%
  \setlength{\belowdisplayshortskip}{0pt}%
  \begin{proof}%
    \vspace{-\baselineskip}%
    \begin{align*}%
      \BODY%
    \end{align*}%
    \vspace{-2.75\baselineskip}\[\]%
  \end{proof}}
\NewEnviron{proofalignat*}[1]{%
  \setlength{\abovedisplayskip}{0pt}%
  \setlength{\belowdisplayskip}{0pt}%
  \setlength{\abovedisplayshortskip}{0pt}%
  \setlength{\belowdisplayshortskip}{0pt}%
  \begin{proof}%
    \vspace{-\baselineskip}%
    \begin{alignat*}{#1}%
      \BODY%
    \end{alignat*}%
    \vspace{-2.75\baselineskip}\[\]%
  \end{proof}}

% NOTE: Used to get "de Bruijn" to sort under "B"
\newcommand{\noopsort}[2]{#2}

\usepackage{float}
\restylefloat{figure}
\usepackage[font=small,
            labelfont=bf,
            labelsep=period,
            figurename=Figure]{caption}

\numberwithin{equation}{thm}

\usepackage{lipsum}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newcommand{\lambdabox}{\lambda^{\mkern-1mu\sq\mkern-2mu}}

\newcommand{\preop}[1]{\mathord{#1}-}
\newcommand{\postop}[1]{-\mathord{#1}}
\newcommand{\binop}[1]{-\mathord{#1}-}

\newcommand{\tsf}[1]{\textsf{\upshape{#1}}}
\newcommand{\stsf}[1]{\tsf{\small{#1}}}

\newcommand{\Set}{\tsf{Set}}
\renewcommand{\:}{\mathrel{:}}
\newcommand{\widecolon}{\mathrel{\rlap{$\mkern4.5mu:$}\hphantom{=}}}
\renewcommand{\r}{\mathrel{\rightarrow}}

\newcommand{\tyrule}[1]{\prftree[l]{${#1} \:\,$}}
\newcommand{\padtyrule}[1]{\prftree[l]{${#1} \widecolon\,$}}
\newcommand{\eqrule}[1]{\prftree[l]{${#1} =$}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Prelude


\newcommand{\id}{\operatorname{\tsf{id}}}
\newcommand{\comp}{\mathrel{\circ}}

\newcommand{\projI}{\operatorname{\tsf{proj}_{\stsf{1}}}}
\newcommand{\projZ}{\operatorname{\tsf{proj}_{\stsf{2}}}}
\newcommand{\comma}{\mathbin{,}}

\let\oldforall\forall
\renewcommand{\forall}{\oldforall\,}

\let\oldexists\exists
\renewcommand{\exists}{\oldexists\,}

\newcommand{\0}{\varnothing}

\newcommand{\zero}{\operatorname{\tsf{zero}}}
\newcommand{\suc}{\operatorname{\tsf{suc}}}


\newcommand{\List}{\operatorname{\tsf{List}}}
\newcommand{\All}{\operatorname{\tsf{All}}}

\renewcommand{\geq}{\mathrel{\supseteq}}

\newcommand{\done}{\operatorname{\tsf{done}}}
\newcommand{\wk}{\operatorname{\tsf{wk}}}
\newcommand{\lift}{\operatorname{\tsf{lift}}}

\newcommand{\infr}{\operatorname{\tsf{inf}_{\stsf{r}}}}
\newcommand{\idr}{\operatorname{\tsf{id}_{\stsf{r}}}}
\newcommand{\compr}{\mathrel{\circ_{\mkern-1mu\stsf{r}}}}

\newcommand{\lookupr}{\operatorname{\tsf{lookup}_{\stsf{r}}}}

\newcommand{\ListZ}{\operatorname{\tsf{List}^{\stsf{2}}}}

\newcommand{\geqZ}{\mathrel{\supseteq^{\stsf{2}}}}

\newcommand{\mwkZ}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{wk}^{\stsf{2}}}}
\newcommand{\wkZ}{\operatorname{\tsf{wk}^{\stsf{2}}}}

\newcommand{\ideZ}{\operatorname{\tsf{id}_{\stsf{r}}^{\stsf{2}}}}
\newcommand{\compeZ}{\mathrel{\circ_{\mkern-1mu\stsf{r}}^{\stsf{2}}}}

\newcommand{\mlookuprZ}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{lookup}_{\stsf{r}}^{\stsf{2}}}}
\newcommand{\lookuprZ}{\operatorname{\tsf{lookup}_{\stsf{r}}^{\stsf{r}}}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Syntax

\newcommand{\Tp}{\operatorname{\tsf{Tp}}}

% \newcommand{\tvar}{\operatorname{^{\stsf{tv}\mkern-4mu}}}
% \newcommand{\R}{\Rightarrow}
\newcommand{\base}{\flat}
\newcommand{\imp}{\mathbin{\supset}}
\renewcommand{\and}{\mathbin{\wedge}}
\newcommand{\sq}{\Box}

\newcommand{\Cx}{\tsf{Cx}}

\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathcal{E}}

\renewcommand{\e}{\mathrel{\vdash}}

\newcommand{\mvar}{\operatorname{^{\stsf{mv}\mkern-4mu}}}
\newcommand{\var}{\operatorname{^{\stsf{v}\mkern-4mu}}}
\newcommand{\lam}{\operatorname{\lambda}}
\newcommand{\app}{\mathbin{\$}}
\newcommand{\quo}[1]{\mathopen{\ulcorner}{#1}\mathclose{\urcorner}}
\newcommand{\unq}[1]{\mathopen{\llcorner}{#1}\mathclose{\lrcorner}\,}

\newcommand{\enm}{\mathrel{\vdash_{\mkern-2mu\stsf{nm}}}}
\newcommand{\ent}{\mathrel{\vdash_{\mkern-2mu\stsf{nt}}}}

\newcommand{\nt}{\operatorname{^{\stsf{nt}\mkern-1mu}}}

\newcommand{\embnm}{\operatorname{\tsf{emb}_{\stsf{nm}}}}
\newcommand{\embnt}{\operatorname{\tsf{emb}_{\stsf{nt}}}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Renaming


\newcommand{\mren}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{ren}}}
\newcommand{\ren}{\operatorname{\tsf{ren}}}

\newcommand{\mrennm}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{ren}_{\stsf{nm}}}}
\newcommand{\mrennt}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{ren}_{\stsf{nt}}}}
\newcommand{\rennm}{\operatorname{\tsf{ren}_{\stsf{nm}}}}
\newcommand{\rennt}{\operatorname{\tsf{ren}_{\stsf{nt}}}}

\newcommand{\rennmZ}{\operatorname{\tsf{ren}_{\stsf{nm}}^{\stsf{2}}}}
\newcommand{\renntZ}{\operatorname{\tsf{ren}_{\stsf{nt}}^{\stsf{2}}}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Substitution


\newcommand{\es}{\mathrel{\vdash\mkern-5mu\star}}

\newcommand{\mrens}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{ren}\star}}
\newcommand{\rens}{\operatorname{\tsf{ren}\star}}

\newcommand{\mwks}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{wk}_{\stsf{s}}}}
\newcommand{\wks}{\operatorname{\tsf{wk}_{\stsf{s}}}}
\newcommand{\mlifts}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{lift}_{\stsf{s}}}}
\newcommand{\lifts}{\operatorname{\tsf{lift}_{\stsf{s}}}}

\newcommand{\mids}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{id}_{\stsf{s}}}}
\newcommand{\ids}{\operatorname{\tsf{id}_{\stsf{s}}}}

\newcommand{\lookups}{\operatorname{\tsf{lookup}_{\stsf{s}}}}
\newcommand{\msub}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{sub}}}
\newcommand{\sub}{\operatorname{\tsf{sub}}}



%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Semantics


\newcommand{\K}{\mathfrak{K}}
\newcommand{\M}{\mathfrak{M}}
\newcommand{\W}{\mathcal{W}}
\newcommand{\V}{\mathrel{\mathcal{V}}}
\newcommand{\ida}{\operatorname{\tsf{id}_{\stsf{a}}}}
\newcommand{\compa}{\mathrel{\circ_{\stsf{a}}}}
\newcommand{\relv}{\operatorname{\tsf{rel}_{\stsf{v}}}}
\newcommand{\peek}[1]{\mathopen{\lfloor}{#1}\mathclose{\rfloor}}
\newcommand{\peeka}[1]{\mathopen{\lfloor}{#1}\mathclose{\rfloor_{\mkern-2mu\stsf{a}}}}

\newcommand{\mpeek}[1]{\mathopen{^{\stsf{m}\mkern-3mu}\lfloor}{#1}\mathclose{\rfloor}}
\newcommand{\mpeeka}[1]{\mathopen{^{\stsf{m}\mkern-3mu}\lfloor}{#1}\mathclose{\rfloor_{\mkern-2mu\stsf{a}}}}

\newcommand{\ee}{\mathrel{\Vdash}}
\newcommand{\eek}{\mathrel{\Vdash_{\stsf{k}}}}
\newcommand{\mee}{\mathrel{^{\stsf{m}\mkern-6mu}\Vdash}}
\newcommand{\meek}{\mathrel{^{\stsf{m}\mkern-6mu}\Vdash_{\stsf{k}}}}
\newcommand{\syn}{\operatorname{\tsf{syn}}}
\newcommand{\sem}{\operatorname{\tsf{sem}}}

\newcommand{\ees}{\mathrel{\Vdash\mkern-5mu\star}}
\newcommand{\eeks}{\mathrel{\Vdash_{\stsf{k}}\mkern-5mu\star}}
\newcommand{\mees}{\mathrel{^{\stsf{m}\mkern-6mu}\Vdash\mkern-5mu\star}}
\newcommand{\meeks}{\mathrel{^{\stsf{m}\mkern-6mu}\Vdash_{\stsf{k}}\mkern-5mu\star}}
\newcommand{\syns}{\operatorname{\tsf{syn}\star}}
\newcommand{\sems}{\operatorname{\tsf{sem}\star}}

\newcommand{\eeq}{\mathrel{\vDash}}

\newcommand{\rel}{\operatorname{\tsf{rel}}}
\newcommand{\relk}{\operatorname{\tsf{rel}_{\stsf{k}}}}
\newcommand{\mrelk}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{rel}_{\stsf{k}}}}
\newcommand{\relks}{\operatorname{\tsf{rel}_{\stsf{k}}\star}}
\newcommand{\mrelks}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{rel}_{\stsf{k}}\star}}

\newcommand{\unit}{\operatorname{\tsf{unit}}}
\newcommand{\bind}{\operatorname{\tsf{bind}}}

\newcommand{\lookup}{\operatorname{\tsf{lookup}}}

\newcommand{\reflect}{\operatorname{\downarrow}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Completeness


\newcommand{\Mu}{\mathfrak{M}_{\stsf{u}}}
\newcommand{\Vu}{\mathrel{\mathcal{V}_{\stsf{u}}}}

\newcommand{\reifyu}{\operatorname{\uparrow_{\stsf{u}}}}
\newcommand{\reflectu}{\operatorname{\downarrow_{\stsf{u}}}}

\newcommand{\mide}{\operatorname{^{\stsf{m}\mkern-2mu}\tsf{id}_{\stsf{e}}}}
\newcommand{\ide}{\operatorname{\tsf{id}_{\stsf{e}}}}
\newcommand{\reify}{\operatorname{\uparrow}}

\newcommand{\nm}{\operatorname{\tsf{nm}}}


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.

% Examples


\newcommand{\mvO}{\operatorname{^{\stsf{mv}\mkern-1mu}\tsf{0}}}
\newcommand{\mvI}{\operatorname{^{\stsf{mv}\mkern-1mu}\tsf{1}}}
\newcommand{\mvZ}{\operatorname{^{\stsf{mv}\mkern-1mu}\tsf{2}}}
\newcommand{\vO}{\operatorname{^{\stsf{v}\mkern-1mu}\tsf{0}}}
\newcommand{\vI}{\operatorname{^{\stsf{v}\mkern-1mu}\tsf{1}}}
\newcommand{\vZ}{\operatorname{^{\stsf{v}\mkern-1mu}\tsf{2}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\def\lastname{Bak}

\begin{document}

\begin{frontmatter}

\title{Introspective Kripke models\\and normalisation-by-evaluation\\for the $\lambdabox$-calculus}

\author{Mi\"{e}tek Bak\thanksref{email}}

\address{Least Fixed Ltd, Cambridge, UK}

\thanks[email]{\href{mailto:mietek@bak.io}{\textnormal{\texttt{mietek@bak.io}}}}


\begin{abstract}
  We consider the $\lambdabox$-calculus, an extension of the simply typed $\lambda$-calculus with a type of quoted programs that corresponds to the $\sq$ connective of the modal logic S4.  We present a novel class of \emph{introspective} Kripke models, constructed in continuation-passing style, and prove the syntax of the $\lambdabox$-calculus sound and complete with respect to these models.  We fully formalise the arguments in \textsc{Agda}, a dependently typed total functional programming language based on intensional type theory.  The composition of our soundness and completeness proofs is an \textsc{Agda} program that performs normalisation-by-evaluation for the $\lambdabox$-calculus.
\end{abstract}

\begin{keyword}
  constructive logic, continuation-passing style, completeness, Curry-Howard correspondence, intensionality, intuitionistic logic, Kripke semantics, meta-programming, modal logic S4, normalisation-by-evaluation, quotation, self-interpretation, typed $\lambda$-calculus
\end{keyword}

\end{frontmatter}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Introduction}


I'd like to have a total functional programming language that works like Lisp; that is, a language that allows programs to be quoted, inspected, and evaluated, in which types are propositions and programs are proofs.  Some people have been using the modal logic S4 for similar purposes.  I quickly found a reasonable $\lambda$-calculus based on S4, that is, the $\lambdabox$-calculus, and I set out to write an interpreter for it.
\begin{gather*}
  \prftree{\Delta \ni A}{\Delta; \Gamma \e A}\qquad
  \prftree{\Delta; \0 \e A}{\Delta; \Gamma \e \sq A}\qquad
  \prftree{\Delta; \Gamma \e \sq A}{\Delta, A; \Gamma \e C}{\Delta; \Gamma \e C}
\end{gather*}
It's well-known that if we prove a language sound and complete with respect to some class of models, then an interpreter falls out --- as long as the proofs are constructive.  Unfortunately, all I could find was classical proofs of completeness for S4, and so I decided to do the proofs myself.

It's also well-known how to prove STLC sound and complete with respect to intuitionistic Kripke semantics.  Since the $\lambdabox$-calculus is an extension of STLC, I thought it should be simple to extend intuitionistic Kripke semantics and obtain the desired proofs.  Famous last words!  Eventually, I realised that the interpretation of $\sq A$ should be a syntactically-justified interpretation of $A$; that is, a pair consisting of a term of $A$ and an interpretation of $A$.
\begin{alignat*}{2}
  & \Delta; \Gamma \ee \sq A \,&&=\, \forall \Delta' \geq \Delta,\,\Gamma' \geq \Gamma.\ \Delta'; \Gamma' \mee A\\[0.5\baselineskip]
  & \Delta; \Gamma \mee A    \,&&=\, \Delta; \0 \e A \times \Delta; \Gamma \ee A
\end{alignat*}
This puts the syntax in the semantics --- peeks beneath the veil sooner than expected.  We can still keep the abstraction of a Kripke semantics, as long as we can discard it when we need to.
  \[\M \,=\, \langle\,\W,\,\binop{\V},\,\binop{\ge},\,\ida,\,\binop{\compa},\,\relv,\,\peek{-},\,\peeka{-}\,\rangle\]
Now, we can try to write the interpretation of $\sq A$ using the model.
\begin{alignat*}{2}
  & \M\,|\,w \ee \sq A \,&&=\, \forall w' \ge w.\ \M\,|\,w' \mee A\\[0.5\baselineskip]
  & \M\,|\,w \mee A    \,&&=\, \mpeek{w}; \0 \e A \times \M\,|\,w \ee A
\end{alignat*}
However, adding this interpretation to intuitionistic Kripke semantics allows us to prove soundness, but not completeness.  The problem with proving completeness with respect to the modified semantics is similar to the problem with proving completeness of full STLC, with disjunction and the empty type.  Some people have already come up with a solution to that, which is a CPS transformation of the semantics.
\begin{alignat*}{2}
  & \M\,|\,w \ee \sq A \,&&=\, \forall w' \ge w.\ \M\,|\,w' \meek A\\
  & \M\,|\,w \eek A    \,&&=\, \forall C,\,w' \ge w.\ \raisebox{-8pt}{\prftree{\raisebox{8pt}{$\forall w'' \ge w'\mkern-2mu.\ $}\prftree{\M\,|\,w'' \ee A}{\lfloor w'' \rfloor \enm C}}{\lfloor w' \rfloor \enm C}}\\[0.5\baselineskip]
  & \M\,|\,w \meek A \,&&=\, \mpeek{w}; \0 \e A \times \M\,|\,w \eek A
\end{alignat*}
It turns out that CPS transforming the modified semantics allows us to prove soundness and completeness, and so, to write an interpreter for the $\lambdabox$-calculus.
  \[\Delta; \Gamma \eeq A \,=\, \forall \M,\,w.\ \raisebox{-8pt}{$\prftree{\M\,|\,w \meeks \Delta}{\M\,|\,w \eeks \Gamma}{\M\,|\,w \eek A}$}\]
\begin{theorem}[Soundness]
  \[\tyrule{\reflect}{\Delta; \Gamma \e A}{\Delta; \Gamma \eeq A}\]
\end{theorem}
\begin{theorem}[Completeness]
  \[\tyrule{\reify}{\Delta; \Gamma \eeq A}{\Delta; \Gamma \enm A}\]
\end{theorem}
\begin{corollary}[Normalisation]
  Every program of the $\lambdabox$-calculus has a normal form.
  \[\tyrule{\nm}{\Delta; \Gamma \e A}{\Delta; \Gamma \enm A}\]
  \begin{proof}\normalshape % XXX
    By composition of soundness (Theorem \ref{soundness}) and completeness (Theorem \ref{completeness}).
    \[\nm \,=\, \reify \comp \reflect\]
  \end{proof}
\end{corollary}\noindent % XXX
I've done that now, and I think this interpreter can be used to decide $\beta\eta$-equivalence according to the following convertibility relation, but I haven't managed to prove this yet.

To prove completeness, we need a canonical model.
\begin{theorem}
  There exists a canonical model.
  \begin{proof}\normalshape % XXX
    \begin{gather*}
      \Mu \,=\, \langle\,\Cx,\,\binop{\Vu},\,\binop{\geqZ},\,\ideZ,\,\binop{\compeZ},\,\rennmZ,\,\id,\,\id\,\rangle\\[0.5\baselineskip]
      \Delta; \Gamma \Vu x \,=\, \Delta; \Gamma \enm \mkern-4mu \base
    \end{gather*}
  \end{proof}
\end{theorem}\noindent % XXX
We first prove soundness and completeness with respect to this canonical model, and then use that to prove completeness proper.
\begin{gather*}
  \tyrule{\reflectu}{\Delta; \Gamma \ent A}{\Mu\,|\,\Delta; \Gamma \eek A}\qquad
  \tyrule{\reifyu}{\Mu\,|\,\Delta; \Gamma \eek A}{\Delta; \Gamma \enm A}
\end{gather*}

\paragraph{Contributions}
\lipsum[1-2]



\section{Syntax}

\begin{definition}
  Syntactic entailment.
  \begin{gather*}
    \tyrule{\mvar}{\Delta \ni A}{\Delta; \Gamma \e A}\qquad
    \tyrule{\var}{\Gamma \ni A}{\Delta; \Gamma \e A}\\[0.5\baselineskip]
    \tyrule{\lam}{\Delta; \Gamma, A \e B}{\Delta; \Gamma \e A \imp B}\qquad
    \tyrule{\binop{\app}}{\Delta; \Gamma \e A \imp B}{\Delta; \Gamma \e A}{\Delta; \Gamma \e B}\\[0.5\baselineskip]
    \tyrule{\quo{-}}{\Delta; \0 \e A}{\Delta; \Gamma \e \sq A}\qquad
    \tyrule{\unq{-}}{\Delta; \Gamma \e \sq A}{\Delta, A; \Gamma \e C}{\Delta; \Gamma \e C}
  \end{gather*}
\end{definition}

\begin{example}
  Axioms of S4.
  \begin{align*}
    & \tsf{D} \widecolon \Delta; \Gamma \e \sq (A \imp B) \imp \sq A \imp \sq B\\
    & \tsf{D} = \lam\, (\lam\, (\unq{\vI}\, \quo{\mvI \app \mvO}))\\[0.5\baselineskip]
    & \tsf{T} \widecolon \Delta; \Gamma \e \sq A \imp A\\
    & \tsf{T} = \lam\, (\unq{\vO} \mvO)\\[0.5\baselineskip]
    & \tsf{4} \widecolon \Delta; \Gamma \e \sq A \imp \sq \sq A\\
    & \tsf{4} = \lam\, (\unq{\vO}\, \quo{\quo{\mvO}})
  \end{align*}
\end{example}

\begin{definition}
  Normal forms and neutral forms.
  \begin{gather*}
    \tyrule{\lam}{\Delta; \Gamma, A \enm B}{\Delta; \Gamma \enm A \imp B}\\[0.5\baselineskip]
    \tyrule{\quo{-}}{\Delta; \0 \e A}{\Delta; \Gamma \enm \sq A}\qquad
    \tyrule{\unq{-}}{\Delta; \Gamma \ent \sq A}{\Delta, A; \Gamma \enm C}{\Delta; \Gamma \enm C}\\[0.5\baselineskip]
    \tyrule{\nt}{\Delta; \Gamma \ent \base}{\Delta; \Gamma \enm \base}\\[0.5\baselineskip]
    \tyrule{\mvar}{\Delta \ni A}{\Delta; \Gamma \ent A}\qquad
    \tyrule{\var}{\Gamma \ni A}{\Delta; \Gamma \ent A}\\[0.5\baselineskip]
    \tyrule{\binop{\app}}{\Delta; \Gamma \ent A \imp B}{\Delta; \Gamma \enm A}{\Delta; \Gamma \ent B}
  \end{gather*}
\end{definition}

\lipsum[1-5]


\section{Semantics}

\begin{definition}
  \textbf{(Introspective Kripke models)\ }
  An \emph{introspective Kripke model} is a tuple that consists of a \emph{set of worlds} $\W$, an unary \emph{valuation relation} on worlds $\V$, a binary \emph{accessibility relation} on worlds $\binop{\ge}$, a \emph{world introspection function} $\peek{-}$, and an \emph{accessibility introspection function} $\peeka{-}$.
  Accessibility is reflexive and transitive, as witnessed by $\ida$ and $\binop{\compa}$, and valuation is monotonic with respect to accessibility, as witnessed by $\relv$.
  World introspection maps worlds to contexts, and accessibility introspection maps elements of the accessibility relation to order-preserving embeddings on contexts.
  \begin{gather*}
    \M \,=\, \langle\, \W,\, \V,\, \binop{\ge},\, \ida,\, \binop{\compa},\, \relv,\, \peek{-},\, \peeka{-}\, \rangle
  \end{gather*}
\end{definition}

\noindent
We write $\V w$ to mean the valuation at $w$, and $w' \ge w$ to say that $w'$ is accessible from $w$.
We refer to an application of the monotonicity property as a \emph{relocation}; for example, if $\eta$ witnesses that $w'$ is accessible from $w$, we read $\relv \eta\, v$ as a relocation of $v$ via $\eta$.

As shorthand, we use \emph{modal world introspection} $\mpeek{-}$ to map a world directly to the modal projection of a context, and \emph{modal accessibility introspection} $\mpeeka{-}$ to map an element of the accessibility relation directly to the modal projection of an order-preserving embedding on contexts.

\begin{definition}
  \textbf{(Values and value continuations)\ }
  \label{ee/eek/meek}
  A \emph{value} for type $A$ at world $w$ of introspective Kripke model $\M$, written $\M\,|\,w \ee A$, is defined by induction on the type, mutually with value continuations and modal value continuations.
  
  For the base type $\flat$ \eqref{ee.tvar}, the value at $w$ is given by the valuation at $w$.
  For function types $A \imp B$ \eqref{ee.imp}, the value at $w$ is a function that, for every $w'$ accessible from $w$, takes a value continuation for $A$ at $w'$ and returns a value continuation for $B$ at $w'$.
  For quotation types $\sq A$ \eqref{ee.sq}, the value at $w$ is a modal value continuation for $A$ at $w$.
  
  A \emph{value continuation} for $A$ at $w$ of $\M$, written $\M\,|\,w \eek A$ \eqref{eek}, is a function that, for every type $C$ and $w'$ accessible from $w$, takes a continuation that, for every $w''$ accessible from $w'$, consumes a value for $A$ at $w''$ and produces a normal term for $C$ under $\peek{w''}$.  The result is a normal term for $C$ under $\peek{w'}$.
  
   A \emph{modal value continuation} for $A$ at $w$ of $\M$, written $\M\,|\,w \meek A$ \eqref{meek}, is a product of a term for $A$ under $\mpeek{w}; \0$ and a value continuation for $A$ at $w$.
  \begin{alignat}{3}
    \label{ee.tvar} & \rlap{$\M\,|\,w \ee \base$}    &&\,&&=\, w \V x\\
    \label{ee.imp}  & \rlap{$\M\,|\,w \ee A \imp B$} &&\,&&=\, \forall w' \ge w.\ \raisebox{-8pt}{\prftree{\M\,|\,w' \eek A} {\M\,|\,w' \eek B}}\\
    \label{ee.sq}   & \rlap{$\M\,|\,w \ee \sq A$}    &&\,&&=\, \M\,|\,w \meek A\\[0.5\baselineskip]
    \label{eek}     && \quad \M\,|\,w \eek A         &\,&&=\, \forall C,\,w' \ge w.\ \raisebox{-8pt}{\prftree{\raisebox{8pt}{$\forall w'' \ge w'\mkern-4mu.\ $} \prftree{\M\,|\,w'' \ee A}{\lfloor w'' \rfloor \enm C}}{\lfloor w' \rfloor \enm C}}\\[\baselineskip]
    \label{meek}    && \quad \M\,|\,w \meek A        &\,&&=\, \mpeek{w}; \0 \e A \times \M\,|\,w \eek A
  \end{alignat}
\end{definition}

\begin{lemma}
  \normalshape
  \textbf{(Projections of modal value continuations)\ }
  \label{syn/sem}
  Given a modal value continuation for $A$ at $w$ of $\M$, there exists a term for $A$ under $\mpeek{w}; \0$, referred to as the \emph{syntactic projection}, and a value continuation for $A$ at $w$, referred to as the \emph{semantic projection}.
  \begin{gather*}
    \tyrule{\syn}{\M\,|\, w \meek A}{\mpeek{w}; \0 \e A}\qquad
    \tyrule{\sem}{\M\,|\, w \meek A}{\M\,|\, w \eek A}
  \end{gather*}
  Proved by product elimination.
\end{lemma}

\begin{lemma}
  \normalshape
  \textbf{(Monotonicity of values with respect to accessibility)\ }
  \label{rel/relk/mrelk}
  For every $w'$ accessible from $w$ of $\M$, given a value for $A$ at $w$, there exists a value for $A$ at $w'$; likewise for value continuations and modal value continuations.
  \begin{gather*}
    \tyrule{\rel}{w' \ge w}{\M\,|\, w \ee A}{w' \ee A}\\[0.5\baselineskip]
    \tyrule{\relk}{w' \ge w}{\M\,|\, w \eek A}{w' \eek A}\qquad
    \tyrule{\mrelk}{w' \ge w}{\M\,|\, w \meek A}{w' \meek A}
  \end{gather*}
  \itshape
  \begin{proof}
    \normalshape
    By mutual induction on the type, and lemmas \ref{mren} and \ref{syn/sem}.
    \begin{alignat*}{3}
      & \rlap{$\rel\, \{\base\}$}     &\,\eta\, &\,v \,&&=\, \relv \eta\, v\\
      & \rlap{$\rel\, \{A \imp B\}$}  &\,\eta\, &\,f \,&&=\, \eta' \mapsto f\, (\eta \compa \eta')\\
      & \rlap{$\rel\, \{\sq A\}$}     &\,\eta\, &\,p \,&&=\, \mrelk \eta\, p\\[0.5\baselineskip]
      && \qquad\quad \relk             \,\eta\, &\,k \,&&=\, \eta'\, f \mapsto k\, (\eta \compa \eta')\, f\\[0.5\baselineskip]
      && \qquad\quad \mrelk            \,\eta\, &\,p \,&&=\, \mren\, \mpeeka{\eta}\, (\syn p),\, \relk \eta\, (\sem p)
    \end{alignat*}
  \end{proof}
\end{lemma}

\noindent
We extend the use of the word \emph{relocating} to mean applying the monotonicity property for values (value continuations; modal value continuations).

\begin{lemma}
  \normalshape
  \textbf{(Kripke continuation monad)\ }
  \label{unit/bind}
  Value continuations form a monad.
  \begin{gather*}
    \tyrule{\unit}{\M\,|\,w \ee A}{\M\,|\,w \eek A}\qquad
    \tyrule{\bind}{\M\,|\,w \eek A}{\raisebox{8pt}{$\forall w' \ge w.\ $} \prftree{\M\,|\, w' \ee A}{\M\,|\, w' \eek C}}{\M\,|\,w \eek C}
  \end{gather*}
  \itshape
  \begin{proof}
    \normalshape
    By lemma \ref{rel/relk/mrelk}.
    \begin{alignat*}{3}
      & \unit\,a      \,&&=\, &&\,\eta\, f \mapsto f \ida\, (\rel \eta\, a)\\[0.5\baselineskip]
      & \bind\, k\, f \,&&=\, &&\,\eta\, f' \mapsto k\, \eta\, (\eta'\, a \mapsto\\
      &                 &&    &&\quad f\, (\eta \compa \eta')\, a \ida\, (\eta''\, b \mapsto\\
      &                 &&    &&\quad\quad f'\, (\eta' \compa \eta'')\, b))
    \end{alignat*}
  \end{proof}
\end{lemma}

\begin{definition}
  \textbf{(Environments)\ }
  \label{eeks/meeks}
  An \emph{(ordinary) environment} for $\Xi$ at $w$ of $\M$, written $\M\,|\,w \eeks$, is a mapping that assigns to every type in $\Xi$ a value continuation at $w$ of $\M$.
  A \emph{modal environment} for $\Xi$ at $w$ of $\M$, written $\M\,|\,w \meeks$, is a mapping that assigns to every type in $\Xi$ a modal value continuation at $w$ of $\M$.
  \begin{gather*}
    \M\,|\,w \eeks \Xi  \,=\, \All\, (\M\,|\,w\, \preop{\eek})\, \Xi\\[0.5\baselineskip]
    \M\,|\,w \meeks \Xi \,=\, \All\, (\M\,|\,w\, \preop{\meek})\, \Xi
  \end{gather*}
\end{definition}

\noindent
We skip the word \emph{ordinary} when possible.  We also abuse the word \emph{environment} to mean a modal environment together with an ordinary environment; for example, given a context $\Delta; \Gamma$ and a world $w$ of $\M$, the \emph{current environment} refers to a modal environment $\delta$ together with an ordinary environment $\gamma$, where $\delta : \M\,|\,w \meeks \Delta$ and $\gamma : \M\,|\,w \eeks \Gamma$.

\begin{lemma}
  \normalshape
  \textbf{(Projections of modal environments)\ }
  \label{syns/sems}
  Given a modal environment for $\Xi$ at $w$ of $\M$, there exists a simultaneous substitution for $\Xi$ under $\mpeek{w}; \0$ and an environment for $\Xi$ at $w$ of $\M$.
  \begin{gather*}
    \tyrule{\syns}{\M\,|\, w \meeks \Xi}{\mpeek{w}; \0 \es \Xi}\qquad
    \tyrule{\sems}{\M\,|\, w \meeks \Xi}{\M\,|\, w \eeks \Xi}
  \end{gather*}
  Proved by induction on the modal environment and lemma \ref{syn/sem}.
\end{lemma}

\begin{lemma}
  \normalshape
  \textbf{(Monotonicity of environments with respect to accessibility)\ }
  \label{relks/mrelks}
  For every $w'$ accessible from $w$, given an environment (modal environment) for $\Xi$ at $w$ of $\M$, there exists an environment (modal environment) for $\Xi$ at $w'$ of $\M$.
  \begin{gather*}
    \tyrule{\relks}{w' \ge w}{\M\,|\, w \eeks \Xi}{w' \eeks \Xi}\qquad
    \tyrule{\mrelks}{w' \ge w}{\M\,|\, w \meeks \Xi}{w' \meeks \Xi}
  \end{gather*}
  Proved by induction on the environment (modal environment) and lemma \ref{rel/relk/mrelk}.
\end{lemma}

\begin{lemma}
  \normalshape
  \textbf{(Environment lookup)\ }
  \label{lookup}
  Given an environment for $\Xi$ at $w$ of $\M$, for every type $A$ in $\Xi$, there exists a value continuation for $A$ at $w$ of $\M$.
  \begin{gather*}
    \tyrule{\lookup}{\M\,|\,w \eeks \Xi}{\Xi \ni A}{\M\,|\,w \eek A}
  \end{gather*}
  Proved by induction on the environment.
\end{lemma}

\begin{definition}
  \textbf{(Semantic entailment)\ }
  \label{eeq}
  We say that $\Delta; \Gamma$ \emph{semantically entails} $A$ when, for every world $w$ of every model $\M$, given a modal environment for $\Delta$ at $w$ of $\M$ and an environment for $\Gamma$ at $w$ of $\M$, there exists a value continuation for $A$ at $w$ of $\M$.
  \begin{gather*}
    \Delta; \Gamma \eeq A \,=\, \forall \M,\,w.\ \raisebox{-8pt}{$\prftree{\M\,|\,w \meeks \Delta}{\M\,|\,w \eeks \Gamma}{\M\,|\,w \eek A}$}
  \end{gather*}
\end{definition}

\begin{theorem}
  \normalshape
  \textbf{(Soundness)\ }
  \label{reflect}
  If $\Delta; \Gamma$ syntactically entails $A$, then $\Delta; \Gamma$ semantically entails $A$.
  \begin{gather*}
    \tyrule{\reflect}{\Delta; \Gamma \e A}{\Delta; \Gamma \eeq A}
  \end{gather*}
  \itshape
  \begin{proof}
    \normalshape
    By induction on the term and lemmas \ref{lookup}, \ref{syns/sems}, \ref{unit/bind}, and \ref{relks/mrelks}.
    \begin{alignat}{3}
      \label{reflect.mvar} & \reflect\, (\mvar i)    \,&&=\, &&\,\delta\, \gamma \mapsto \lookup\, (\sems \delta)\, i\\
      \label{reflect.var}  & \reflect\, (\var i)     \,&&=\, &&\,\delta\, \gamma \mapsto \lookup \gamma\, i\\
      \label{reflect.lam}  & \reflect\, (\lam \D)    \,&&=\, &&\,\delta\, \gamma \mapsto \unit\, (\eta\,k \mapsto\\
      \nonumber            & && && \quad \reflect \D\, (\mrelks \eta\, \delta)\, (\relks \eta\, \gamma,\, k))\\
      \label{reflect.app}  & \reflect\, (\D \app \E) \,&&=\, &&\,\delta\, \gamma \mapsto \bind\, (\reflect \D\, \delta\, \gamma)\, (\eta\,f \mapsto\\
      \nonumber            & && && \quad f \ida\, (\reflect \E\, (\mrelks \eta\, \delta)\, (\relks \eta\, \gamma)))\\
      \label{reflect.quo}  & \reflect\, (\quo{\D})   \,&&=\, &&\,\delta\, \gamma \mapsto \unit\, (\msub\, (\syns \delta)\, \D,\, \reflect \D\, \delta\, \0)\\
      \label{reflect.unq}  & \reflect\, (\unq{\D}\E) \,&&=\, &&\,\delta\, \gamma \mapsto \bind\, (\reflect \D\, \delta\, \gamma)\, (\eta\,p \mapsto\\
      \nonumber            & && && \quad \reflect \E\, (\mrelks \eta\, \delta,\, p)\, (\relks \eta\, \gamma))
    \end{alignat}
  \end{proof}
\end{theorem}
\noindent
$\reflect$, pronounced `reflect', is The proof of soundness is a monadic evaluator for $\lambdabox$-terms: a function that \emph{reflects} syntactic objects as semantic objects, abstracting over the specifics of any particular model.  Given a modal environment $\delta$ and an environment $\gamma$, both at some world of some model, evaluation consumes a term for $A$ under $\Delta; \Gamma$ and produces a value continuation for $A$, still at the same world of the same model.

Modal variables \eqref{reflect.mvar} and variables \eqref{reflect.var} are looked up in the semantic projection of $\delta$ and in $\gamma$, respectively.

In the case of function abstraction \eqref{reflect.lam}, we first suppose that we can access via $\eta$ some world in which the value continuation $k$ is the function argument.  Then, we evaluate the function body $\D$ in an environment obtained by relocating the current environment via $\eta$ and extending it with $k$.

To perform function application \eqref{reflect.app}, we start by evaluating the function $\D$ in the current environment, obtaining a value $f$ at some world accessible via $\eta$.  By definition, the value of a function of type $A \imp B$ is a meta-level function that, given a value continuation of $A$ at some accessible world, returns a value continuation of $B$ at the same world.  Evaluating the function argument $\E$ in the current environment relocated via $\eta$ gives us a value continuation, which we use to call $f$.

Normalisation-by-evaluation is also known as \emph{reduction-free normalisation} \cite{AltenkirchHS1995,Danvy2005}, because performing substitution at the meta level frees us from having to implement it at the object level.  However, in the case of quotation \eqref{reflect.quo}, object-level modal substitution \eqref{msub} is required.

XXX

\lipsum[1]


\section{Completeness}

\begin{definition}
  \label{Mu}
  \emph{A universal model for the $\lambdabox$-calculus.}
  \begin{gather*}
    \Mu \,=\, \langle\,\Cx,\,\binop{\Vu},\,\binop{\geqZ},\,\ideZ,\,\binop{\compeZ},\,\rennmZ,\,\id,\,\id\,\rangle\\[0.5\baselineskip]
    \Delta; \Gamma \Vu x \,=\, \Delta; \Gamma \enm \mkern-4mu \base
  \end{gather*}
\end{definition}

\begin{lemma}
  \label{reflectu/reifyu}
  Soundness and completeness of the $\lambdabox$-calculus with respect to the universal model $\Mu$.
  \begin{gather*}
    \tyrule{\reflectu}{\Delta; \Gamma \ent A}{\Mu\,|\,\Delta; \Gamma \eek A}\qquad
    \tyrule{\reifyu}{\Mu\,|\,\Delta; \Gamma \eek A}{\Delta; \Gamma \enm A}
  \end{gather*}
  \begin{proof}
    \normalshape
    By mutual induction on the type.
    \begin{alignat}{2}
      & \reflectu\, \{\base\}    \,&&\D \,=\, \unit\, (\nt \D)\\
      & \reflectu\, \{A \imp B\} \,&&\D \,=\, \unit\, (\eta\, k \mapsto \reflectu\, (\renntZ \eta\, \D \app \reifyu k))\\
      & \reflectu\, \{\sq A\}    \,&&\D \,=\, \eta\, f \mapsto \unq{\renntZ \eta\, \D}\, (f\, (\mwkZ \ideZ)\, (\mvO,\, \reflectu \mvO))\\[0.5\baselineskip]
      & \reifyu\,   \{\base\}    \,&& k \,=\, k \ideZ\, (\eta\ \D \mapsto \D)\\
      & \reifyu\,   \{A \imp B\} \,&& k \,=\, k \ideZ\, (\eta\, f \mapsto \lam\, (\reifyu\, (f\ (\wkZ \ideZ)\, (\reflectu \vO))))\\
      & \reifyu\,   \{\sq A\}    \,&& k \,=\, k \ideZ\, (\eta\, p \mapsto \quo{\syn p})
    \end{alignat}
  \end{proof}
\end{lemma}

\begin{lemma}
  \label{mide/ide}
  \normalshape
  \emph{Identity environments.}
  \begin{gather*}
    \mide : \Delta; \Gamma \meeks \Delta\qquad
    \ide : \Delta; \Gamma \eeks \Gamma
  \end{gather*}
  \normalshape
  Each proved by induction on the environment.
\end{lemma}

\begin{theorem}[Completeness]
  \label{reify}
  \begin{gather*}
    \tyrule{\reify}{\Delta; \Gamma \eeq A}{\Delta; \Gamma \enm A}
  \end{gather*}
  \begin{proof}
    \normalshape
    By lemma \ref{reflectu/reifyu} and \ref{mide/ide}.
    \begin{gather*}
      \reify f \,=\, \reifyu\, (f \mide \ide)
    \end{gather*}
  \end{proof}
\end{theorem}

\begin{corollary}[Normalisation]
  \label{nm}
  \begin{gather*}
    \tyrule{\nm}{\Delta; \Gamma \e A}{\Delta; \Gamma \enm A}
  \end{gather*}
  \begin{proof}
    \normalshape
    By theorem \ref{reflect} and \ref{reify}.
    \begin{gather*}
      \nm \,=\, \reify \comp \reflect
    \end{gather*}
  \end{proof}
\end{corollary}


\lipsum[1-5]


\section{Conclusion}

\lipsum[1-5]


%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.%.


\section*{Acknowledgements}

The author is deeply grateful to Andreas Abel, Guillaume Allais, Ahmad Salim Al-Sibahi, Roy Dyckhoff, Michael Gabbay, Paolo Giarrusso, Tom Jack, Roman Kireev, Jerzy Marcinkowski, Darryl McAdams, Conor McBride, Dominic Orchard, Maciej Pir\'{o}g, Ida Szubert, Tarmo Uustalu, Andrea Vezzosi, and Tomasz Wierzbicki, for many fruitful discussions over the years.

Furthermore, the author thanks Sergei Artemov, Andrej Bauer, Jacques Carette, Danko Ilik, Alex Kavvos, Jon Sterling, and the anonymous reviewers, for comments that helped improve this work.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% TODO: Remove this!
\paragraph{Citations}

Abel (2013) \cite{Abel2013}.
Alechina \emph{et~al.} (2001) \cite{AlechinaMPR2001}.
Altenkirch (1993) \cite{Altenkirch1993}.
Altenkirch, Hofmann, and Streicher (1995) \cite{AltenkirchHS1995}.
Altenkirch and Reus (1999) \cite{AltenkirchR1999}.
Artemov (2001) \cite{Artemov2001}.
Artemov and Bonelli (2007) \cite{ArtemovB2007}.
Bauer (2016) \cite{Bauer2016}.
Berger and Schwichtenberg (1991) \cite{BergerS1991}.
Bierman and de~Paiva (2000) \cite{BiermanP2000}.
Boolos (1994) \cite{Boolos1994}.
Bo\v{z}i\'{c} and Do\v{s}en (1984) \cite{BozicD1984}.
Brown and Palsberg (2016) \cite{BrownP2016}.
Chapman (2009) \cite{Chapman2009}.
C.~Coquand (1993) \cite{Coquand1993}.
C.~Coquand (2002) \cite{Coquand2002}.
T.~Coquand and Dybjer (1997) \cite{CoquandD1997}.
Danvy (1996) \cite{Danvy1996}.
Danvy (2005) \cite{Danvy2005}.
Danvy, Keller, and Puech (2014) \cite{DanvyKP2014}.
Davies and Pfenning (2001) \cite{DaviesP2001}.
de~Bruijn (1972) \cite{DeBruijn1972}.
Dybjer and Filinski (2002) \cite{DybjerF2002}.
Dyckhoff (2016) \cite{Dyckhoff2016}.
Ewald (1986) \cite{Ewald1986}.
Fischer Servi (1984) \cite{FischerServi1984}.
Fitting (2005) \cite{Fitting2005}.
Gabbay and Nanevski (2013) \cite{GabbayN2013}.
Girard \emph{et~al.} (1989) \cite{GirardTL1989}.
G\"{o}del (1933) \cite{Goedel1933}.
Iemhoff (2001) \cite{Iemhoff2001}.
Ilik (2010) \cite{Ilik2010}.
Ilik (2013) \cite{Ilik2013}.
Joachimski and Matthes (2003) \cite{JoachimskiM2003}.
Kovacs (2017) \cite{Kovacs2017}.
Kripke (1965) \cite{Kripke1965}.
Lindley (2005) \cite{Lindley2005}.
Martin-L\"{o}f (1975) \cite{MartinLoef1975}.
McBride (2005) \cite{McBride2005}.
McCarthy \emph{et~al.} (1962) \cite{McCarthyAEHL1962}.
McKinsey and Tarski (1948) \cite{McKinseyT1948}.
Meyer and Wand (1985) \cite{MeyerW1985}.
Mkrtychev (1997) \cite{Mkrtychev1997}.
Nanevski (2002) \cite{Nanevski2002}.
Nanevski (2004) \cite{Nanevski2004}.
Nanevski, Pfenning, and Pientka (2008) \cite{NanevskiPP2008}.
Norell (2007) \cite{Norell2007}.
Ono (1977) \cite{Ono1977}.
Pfenning and Davies (2001) \cite{PfenningD2001}.
Pientka and Abel (2015) \cite{PientkaA2015}.
Plotkin and Stirling (1986) \cite{PlotkinS1986}.
Sheard (2001) \cite{Sheard2001}.
Simpson (1994) \cite{Simpson1994}.
Stump (2016) \cite{Stump2016}.
Turner (2004) \cite{Turner2004}.
Wadler (2015) \cite{Wadler2015}.
Wickline, Lee, and Pfenning (1998) \cite{WicklineLP1998}.
Wijesekera (1990) \cite{Wijesekera1990}.


\bibliographystyle{entcs}
\bibliography{imla2017}

\end{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

